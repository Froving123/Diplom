(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{7482:function(e,s,r){Promise.resolve().then(r.bind(r,9804))},9804:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return f}});var l=r(3827),t=r(9877),i=r.n(t),c=r(4090),a=r(8792),n=r(3105),_=r(2730),d=r(1748),o=r(6312),u=r.n(o);let v=()=>{let[e,s]=(0,c.useState)([]);return(0,c.useEffect)(()=>{(async()=>{let e=n.I.currentUser;if(e){let r=(0,d.iH)(n.db,"reserv"),l=(0,d.IO)(r,(0,d.g2)("userId"),(0,d.EW)(e.uid));try{let e=await (0,d.U2)(l);if(e.exists()){let r=[];e.forEach(e=>{r.push({id:e.key,...e.val()})}),s(r)}else console.log("Данные не найдены")}catch(e){console.error("Ошибка при получении данных: ",e)}}})()},[]),(0,l.jsxs)("div",{className:u().reservation,children:[(0,l.jsx)("h2",{className:u().title_reserv,children:"Ваше бронирование"}),e.length>0?(0,l.jsx)("ul",{className:u().ul_reserv,children:e.map(e=>(0,l.jsxs)("li",{className:u().li_reserv,children:[(0,l.jsxs)("p",{className:u().reserv_description,children:["Дата: ",e.date]}),(0,l.jsxs)("p",{className:u().reserv_description,children:["Время: ",e.time]}),(0,l.jsx)("input",{className:u().delivery_box,type:"checkbox"})]},e.id))}):(0,l.jsx)("ul",{className:u().ul_reserv,children:(0,l.jsx)("li",{className:u().li_reserv,children:(0,l.jsx)("p",{className:u().reserv_empty,children:"У вас нет бронирования"})})})]})};var p=r(3090),y=r.n(p);let h=()=>{let[e,s]=(0,c.useState)([]),[r,t]=(0,c.useState)([]),[i,a]=(0,c.useState)({});return(0,c.useEffect)(()=>{(async()=>{let e=n.I.currentUser;if(e){let r=(0,d.iH)(n.db,"delivery"),l=(0,d.IO)(r,(0,d.g2)("userId"),(0,d.EW)(e.uid));try{let e=await (0,d.U2)(l);if(e.exists()){let r=[],l={};e.forEach(e=>{let s={id:e.key,...e.val()};r.push(s),l[s.id]="Готовится"}),s(r),a(l)}else console.log("Данные не найдены")}catch(e){console.error("Ошибка при получении данных: ",e)}}})()},[]),(0,c.useEffect)(()=>{(async()=>{let e=n.I.currentUser;if(e){let s=(0,d.iH)(n.db,"product"),r=(0,d.IO)(s,(0,d.g2)("userId"),(0,d.EW)(e.uid));try{(0,d.jM)(r,e=>{if(e.exists()){let s=[];e.forEach(e=>{s.push({id:e.key,...e.val()})}),t(s)}else console.log("Данные не найдены")})}catch(e){console.error("Ошибка при получении данных: ",e)}}})()},[]),(0,c.useEffect)(()=>{let e={};return Object.keys(i).forEach(s=>{"Готовится"===i[s]&&(e[s]=setTimeout(()=>{a(e=>({...e,[s]:"В пути"})),setTimeout(()=>{a(e=>({...e,[s]:"Доставлен"}))},36e5)},9e5))}),()=>{Object.values(e).forEach(e=>clearTimeout(e))}},[i]),(0,l.jsxs)("div",{className:y().Delivery,children:[(0,l.jsx)("h2",{className:y().title_delivery,children:"Ваши текущие заказы"}),e.length>0?(0,l.jsx)("ul",{className:y().ul_delivery,children:e.map(e=>(0,l.jsxs)("li",{className:y().li_delivery,children:[(0,l.jsxs)("p",{className:y().delivery_description,children:["Адрес: ",e.address]}),(0,l.jsxs)("p",{className:y().delivery_description,children:["Оплата: ",e.payment]}),(0,l.jsxs)("p",{className:y().delivery_description,children:["Стоимость заказа: ",e.price,"₽"]}),(0,l.jsxs)("p",{className:y().delivery_description,children:["Статус заказа: ",i[e.id]||"Готовится"]}),(0,l.jsx)("input",{className:y().delivery_box,type:"checkbox"})]},e.id))}):(0,l.jsx)("ul",{className:y().ul_delivery,children:(0,l.jsx)("li",{className:y().li_delivery,children:(0,l.jsx)("p",{className:y().delivery_empty,children:"Сейчас у вас нет заказов"})})})]})};var f=()=>{let[e,s]=(0,c.useState)(null);return(0,c.useEffect)(()=>{let e=(0,_.Aj)(n.I,e=>{e?s(e):s(null)});return()=>{e()}},[]),(0,l.jsx)("div",{className:i().str_profile,children:e?(0,l.jsxs)("div",{className:i().profile,children:[(0,l.jsx)("p",{className:i().user,children:"Здравствуйте ".concat(e.email)}),(0,l.jsx)(v,{}),(0,l.jsx)(h,{}),(0,l.jsx)(a.default,{href:"/",children:(0,l.jsx)("button",{className:i().button_logOut,onClick:function(){(0,_.w7)(n.I).then(()=>console.log("success")).catch(e=>console.log(e))},children:"Выйти"})})]}):""})}},3105:function(e,s,r){"use strict";r.d(s,{I:function(){return a},db:function(){return n}});var l=r(6142),t=r(2730),i=r(1748);let c=(0,l.ZF)({apiKey:"AIzaSyDO_-hjElfDwtU1ESVRSFt8hZJ7IIMwlno",authDomain:"best-rest-99119.firebaseapp.com",databaseURL:"https://best-rest-99119-default-rtdb.europe-west1.firebasedatabase.app",projectId:"best-rest-99119",storageBucket:"best-rest-99119.appspot.com",messagingSenderId:"90112321750",appId:"1:90112321750:web:2be2a6ea307df81f7b8177"}),a=(0,t.v0)(c),n=(0,i.N8)(c)},8792:function(e,s,r){"use strict";r.d(s,{default:function(){return t.a}});var l=r(5250),t=r.n(l)},9877:function(e){e.exports={str_profile:"AuthDetails_str_profile__jwcKg",profile:"AuthDetails_profile__pvzwh",user:"AuthDetails_user__4v7Qu",button_logOut:"AuthDetails_button_logOut___dACP"}},3090:function(e){e.exports={delivery:"Delivery_user_delivery__Iy0Ab",title_delivery:"Delivery_user_title_delivery__CHzyn",ul_delivery:"Delivery_user_ul_delivery__bVOH1",li_delivery:"Delivery_user_li_delivery__TfImB",delivery_description:"Delivery_user_delivery_description__1_J8i",delivery_box:"Delivery_user_delivery_box__Y8nEy",delivery_empty:"Delivery_user_delivery_empty__EqYxq"}},6312:function(e){e.exports={reservation:"Reservations_reservation__kXcCa",title_reserv:"Reservations_title_reserv__mkNY_",ul_reserv:"Reservations_ul_reserv__Dd1ny",li_reserv:"Reservations_li_reserv__q0HSb",reserv_description:"Reservations_reserv_description__og4rs",delivery_box:"Reservations_delivery_box__TD25E",reserv_empty:"Reservations_reserv_empty__7BzcJ"}}},function(e){e.O(0,[481,150,168,250,971,69,744],function(){return e(e.s=7482)}),_N_E=e.O()}]);